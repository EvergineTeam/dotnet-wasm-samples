<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>.Net6.0 File System Wasm Sample</title>
  </head>

  <body>
      <div>Hi! This sample loads an external file (assets/file.txt) into the file system. Then it is read from .Net and printed on the console.</div>
      <div>Check the console to know the answer to life the universe and everything!</div>

      <script src="_framework/blazor.webassembly.js"></script>
      <script src="assets.js"></script>
      <script type="text/javascript">
          var Program = {
              assemblyName: "Wasm.Filesystem.Sample",
              className: "Program",
              Run: function () {
                  this.invoke("Run", []);
              },
              invoke: function (methodName, args) {
                  BINDING.call_static_method(
                      `[${this.assemblyName}] ${this.className}:${methodName}`,
                      args
                  );
              },
          };

          function waitAndRun() {
              if (areAllAssetsLoaded()) {
                  console.log("Running...");
                  this.Program.Run();
              } else {
                  setTimeout(waitAndRun, 100);
              }
          }

          waitAndRun();
      </script>
  </body>
</html>
